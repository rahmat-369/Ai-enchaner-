<!DOCTYPE html>
<html>
<head>
    <title>AI Enhancer Web - By AlfiXD</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        * { box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
        .container { max-width: 800px; margin: 0 auto; background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); border-radius: 20px; padding: 30px; box-shadow: 0 8px 32px rgba(0,0,0,0.1); }
        h1 { text-align: center; margin-bottom: 30px; }
        .input-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: bold; }
        select, input, button { width: 100%; padding: 12px; border: none; border-radius: 10px; font-size: 16px; }
        select, input { background: rgba(255,255,255,0.2); color: white; }
        input::placeholder { color: rgba(255,255,255,0.7); }
        button { background: linear-gradient(to right, #43e97b 0%, #38f9d7 100%); color: #333; font-weight: bold; cursor: pointer; transition: transform 0.2s; }
        button:hover { transform: translateY(-2px); }
        button:disabled { opacity: 0.5; cursor: not-allowed; }
        .image-preview { display: flex; gap: 20px; margin: 30px 0; flex-wrap: wrap; }
        .image-box { flex: 1; min-width: 300px; }
        .image-box img { width: 100%; height: 300px; object-fit: contain; background: rgba(0,0,0,0.2); border-radius: 10px; border: 2px solid rgba(255,255,255,0.3); }
        .loading { display: none; text-align: center; margin: 20px 0; }
        .spinner { border: 5px solid rgba(255,255,255,0.3); border-radius: 50%; border-top: 5px solid #38f9d7; width: 50px; height: 50px; animation: spin 1s linear infinite; margin: 0 auto 10px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        @media (max-width: 768px) { .container { padding: 20px; } .image-preview { flex-direction: column; } }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸŽ¨ AI Image Enhancer</h1>
        
        <div class="input-group">
            <label for="imageInput">Pilih Gambar</label>
            <input type="file" id="imageInput" accept="image/*">
        </div>
        
        <div class="input-group">
            <label for="action">Pilih Fitur</label>
            <select id="action" onchange="toggleOptions()">
                <option value="toanime">Convert ke Anime</option>
                <option value="rmbg">Hapus Background</option>
                <option value="upscale">Upscale HD</option>
                <option value="editimg">Edit Gambar AI</option>
                <option value="customanime">Custom Anime</option>
            </select>
        </div>
        
        <div id="styleGroup" class="input-group">
            <label for="style">Pilih Style</label>
            <select id="style">
                <option value="anime">Anime</option>
                <option value="manga">Manga</option>
                <option value="ghibli">Ghibli</option>
                <option value="cyberpunk">Cyberpunk</option>
                <option value="watercolor">Watercolor</option>
                <option value="pixelart">Pixel Art</option>
                <option value="sketch">Sketch</option>
                <option value="oilpainting">Oil Painting</option>
            </select>
        </div>
        
        <div id="promptGroup" class="input-group" style="display:none;">
            <label for="prompt">Prompt / Instruksi</label>
            <input type="text" id="prompt" placeholder="Contoh: Convert to RETRO 80s ANIME style">
        </div>
        
        <div id="scaleGroup" class="input-group" style="display:none;">
            <label for="scale">Scale (2-10)</label>
            <input type="number" id="scale" min="2" max="10" value="6">
        </div>
        
        <div id="modelGroup" class="input-group" style="display:none;">
            <label for="model">Model AI</label>
            <select id="model">
                <option value="nano_banana">Nano Banana (Default)</option>
                <option value="seed_dream">Seed Dream</option>
                <option value="flux">Flux</option>
                <option value="qwen_image">Qwen Image</option>
            </select>
        </div>
        
        <button onclick="processImage()" id="processBtn">Proses Sekarang</button>
        
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Memproses... Tunggu 10-30 detik</p>
        </div>
        
        <div class="image-preview">
            <div class="image-box">
                <h3>Original</h3>
                <img id="originalPreview" src="https://via.placeholder.com/300x300/333/fff?text=Pilih+Gambar">
            </div>
            <div class="image-box">
                <h3>Hasil AI</h3>
                <img id="resultPreview" src="https://via.placeholder.com/300x300/333/fff?text=Hasil+AI">
            </div>
        </div>
        
        <div style="text-align:center; margin-top:30px; opacity:0.8; font-size:14px;">
            Â© AlfiXD â€¢ https://whatsapp.com/channel/0029Vb4fjWE1yT25R7epR110
        </div>
    </div>

    <script>
        // Tampilkan preview gambar
        document.getElementById('imageInput').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('originalPreview').src = e.target.result;
                }
                reader.readAsDataURL(file);
            }
        });

        // Toggle opsi berdasarkan fitur
        function toggleOptions() {
            const action = document.getElementById('action').value;
            document.getElementById('styleGroup').style.display = action === 'toanime' ? 'block' : 'none';
            document.getElementById('promptGroup').style.display = (action === 'editimg' || action === 'customanime') ? 'block' : 'none';
            document.getElementById('scaleGroup').style.display = action === 'upscale' ? 'block' : 'none';
            document.getElementById('modelGroup').style.display = action === 'editimg' ? 'block' : 'none';
        }

        // Proses gambar
        async function processImage() {
            const fileInput = document.getElementById('imageInput');
            const action = document.getElementById('action').value;
            const style = document.getElementById('style').value;
            const prompt = document.getElementById('prompt').value;
            const scale = document.getElementById('scale').value;
            const model = document.getElementById('model').value;
            
            if (!fileInput.files[0]) {
                alert('Pilih gambar dulu!');
                return;
            }
            
            // Convert to base64
            const base64 = await toBase64(fileInput.files[0]);
            
            // Show loading
            document.getElementById('loading').style.display = 'block';
            document.getElementById('processBtn').disabled = true;
            
            try {
                // Kirim ke API
                const response = await fetch('/api/enhance', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ image: base64, action, style, prompt, scale, model })
                });
                
                const result = await response.json();
                
                if (result.output) {
                    document.getElementById('resultPreview').src = result.output;
                } else {
                    alert('Error: ' + (result.error || 'Gagal memproses'));
                }
            } catch (error) {
                alert('Error: ' + error.message);
            } finally {
                document.getElementById('loading').style.display = 'none';
                document.getElementById('processBtn').disabled = false;
            }
        }
        
        function toBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => resolve(reader.result);
                reader.onerror = reject;
            });
        }
        
        // Init
        toggleOptions();
    </script>
</body>
                                                       </html>
